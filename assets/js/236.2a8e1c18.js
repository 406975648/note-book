(window.webpackJsonp=window.webpackJsonp||[]).push([[236],{699:function(n,s,e){"use strict";e.r(s);var a=e(2),t=Object(a.a)({},function(){var n=this,s=n.$createElement,e=n._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("h1",{attrs:{id:"_180-商品详情页动态渲染系统：部署-jenkins-持续集成服务器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_180-商品详情页动态渲染系统：部署-jenkins-持续集成服务器","aria-hidden":"true"}},[n._v("#")]),n._v(" 180. 商品详情页动态渲染系统：部署 jenkins 持续集成服务器")]),n._v(" "),e("p",[n._v("使用 jenkins 自动化的流程：")]),n._v(" "),e("ul",[e("li",[n._v("jenkins 上执行构建")]),n._v(" "),e("li",[n._v("会自动从配置的 git 仓库拉取代码")]),n._v(" "),e("li",[n._v("用配置的脚本打包")]),n._v(" "),e("li",[n._v("创建 docker 镜像")]),n._v(" "),e("li",[n._v("通过 docker 容器来部署 spring cloud 微服务")])]),n._v(" "),e("p",[n._v("简要流程：代码上传至 git、使用 jenkins 创建构建项目、写自动化部署脚本")]),n._v(" "),e("h2",{attrs:{id:"jenkins-安装（版本太老插件安装失败）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-安装（版本太老插件安装失败）","aria-hidden":"true"}},[n._v("#")]),n._v(" jenkins 安装（版本太老插件安装失败）")]),n._v(" "),e("p",[n._v("下载地址：http://updates.jenkins-ci.org/download/war/")]),n._v(" "),e("p",[n._v("本次使用 2.78 版本的 jenkins.war")]),n._v(" "),e("p",[n._v("上传 jenkins.war 到 /usr/local/jenkins 目录下，并执行以下命令")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("# 启动 jenkins 服务器\n# 如果提示 Error: Unable to access jarfile Jenkins.war，等一定要注意 war 包名称是否正确\n[root@eshop-detail01 jenkins]# java -jar jenkins.war --httpPort=8080\n\n# 启动成功后，会在控制台看到如下的信息\n\n*************************************************************\n*************************************************************\n*************************************************************\n\nJenkins initial setup is required. An admin user has been created and a password generated.\nPlease use the following password to proceed to installation:\n\n90a7f0739f4b4b06b55a43aa803481a4\n\n# 注意这个，第一次访问的初始密码位置，上面的内容就是该文件中的内容\nThis may also be found at: /root/.jenkins/secrets/initialAdminPassword\n\n\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br"),e("span",{staticClass:"line-number"},[n._v("15")]),e("br"),e("span",{staticClass:"line-number"},[n._v("16")]),e("br"),e("span",{staticClass:"line-number"},[n._v("17")]),e("br"),e("span",{staticClass:"line-number"},[n._v("18")]),e("br"),e("span",{staticClass:"line-number"},[n._v("19")]),e("br")])]),e("p",[n._v("访问地址：http://192.168.99.11:8080，填入初始密码")]),n._v(" "),e("p",[n._v("选择 install suggested plugins 安装推荐的插件，等待安装完成")]),n._v(" "),e("p",[n._v("创建管理员账户，就可以了；（但是本人在实践过程中插件安装一直都安装不成功，无奈后续的没有进行下去）")]),n._v(" "),e("h2",{attrs:{id:"jenkins-官网最新版本安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-官网最新版本安装","aria-hidden":"true"}},[n._v("#")]),n._v(" jenkins 官网最新版本安装")]),n._v(" "),e("p",[n._v("上面的安装方式在安装插件的时候，总会以为是由于没有翻墙的原因导致失败，在推荐插件安装失败后，选择继续（不是重试），\n进入 jenkins 后，在 ui 中插件管理里面看到的报错信息大意是，当前的 jenkins 版本太低，插件不能再低版本上安装。\n所以这里使用官网的最新安装方法来安装")]),n._v(" "),e("p",[n._v("官网 centos 安装 https://pkg.jenkins.io/redhat-stable/")]),n._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("wget")]),n._v(" -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 如果已经导入了 key ，报错的话，可以忽略")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" jenkins\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br")])]),e("p",[n._v("其他详细的使用和配置可以 "),e("a",{attrs:{href:"https://wiki.jenkins.io/display/JENKINS/Installing+Jenkins+on+Red+Hat+distributions",target:"_blank",rel:"noopener noreferrer"}},[n._v("参考官网文章"),e("OutboundLink")],1)]),n._v(" "),e("h2",{attrs:{id:"jenkins-启动停止"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-启动停止","aria-hidden":"true"}},[n._v("#")]),n._v(" jenkins 启动停止")]),n._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 启动、停止、重启")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("service")]),n._v(" jenkins start/stop/restart\n"),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("chkconfig")]),n._v(" jenkins on\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br")])]),e("p",[n._v("一些常用的路径如下：")]),n._v(" "),e("ul",[e("li",[n._v("日志文件路径： "),e("code",[n._v("/var/log/jenkins/jenkins.log")])]),n._v(" "),e("li",[n._v("安装目录："),e("code",[n._v("/var/lib/jenkins/")])])]),n._v(" "),e("p",[n._v("启动之后，输入初始密码（在日志中有打印，ui 中也有指引），选择安装推荐的插件（这一步已经实锤：不修改源也能装成功），\n插件安装完成之后可以选择创建一个管理员账户，会告诉你需要重启 jenkins（如果它自动刷新浏览器被卡主，这个时候你只需要重新刷新下浏览器就行了）")]),n._v(" "),e("h2",{attrs:{id:"jenkins-错误解决"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-错误解决","aria-hidden":"true"}},[n._v("#")]),n._v(" jenkins 错误解决")]),n._v(" "),e("h3",{attrs:{id:"初始密码后，卡在-jenkins正在启动-请稍后-中"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始密码后，卡在-jenkins正在启动-请稍后-中","aria-hidden":"true"}},[n._v("#")]),n._v(" 初始密码后，卡在 "),e("code",[n._v("Jenkins正在启动,请稍后...")]),n._v(" 中")]),n._v(" "),e("p",[n._v("如果输入初始密码后，一直卡在 "),e("code",[n._v("Jenkins正在启动,请稍后...")]),n._v(" 的页面中。")]),n._v(" "),e("p",[n._v("解决方案：请找到 jenkins 工作目录（日志中有打印 war 包被解压到了哪个目录下）")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v('# 把 http://updates.jenkins-ci.org/update-center.json 改成 http://mirror.xmission.com/jenkins/updates/update-center.json\nvi /root/.jenkins/hudson.model.UpdateCenter.xml\n\n# 修改另外一个地方\n# 把 "connectionCheckUrl":"http://www.google.com/" 改为  "connectionCheckUrl":"http://www.baidu.com/"\nvi /root/.jenkins/updates/default.json\n')])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br")])]),e("p",[n._v("记得需要关闭浏览器后再重新进入一次，输入初始密码")])])},[],!1,null,null,null);s.default=t.exports}}]);